

import re
from idna import decode

regex_separators = re.compile(r"[\x2E\u3002\uFF0E\uFF61]")
regex_punycode = re.compile(r"^xn--")


def map_(array, fn):
    result = []
    length = len(array)
    while length:
        length -= 1
        result.append(fn(array[length]))
    return result[::-1]  # Reverse to maintain original order


def map_domain(string, fn):
    parts = string.split("@")
    result = ""
    if len(parts) > 1:
        # In email addresses, only the domain name should be punycoded. Leave
        # the local part (i.e. everything up to `@`) intact.
        result = parts[0] + "@"
        string = parts[1]
    string = regex_separators.sub(".", string)
    labels = string.split(".")
    encoded = ".".join(map_(labels, fn))
    return result + encoded


def to_unicode(input_string):
    return map_domain(
        input_string,
        lambda string: decode(string[4:].lower())
        if regex_punycode.match(string)
        else string,
    )


def normalize_idna(input):
    try:
        return normalize(to_unicode(input))
    except:
        return input


def normalize(input):
    NormalizationMap = {
        "0": "o",
        "1": "i",
        "2": "z",
        "5": "s",
        "7": "z",
        "8": "b",
        "À": "a",
        "Á": "a",
        "Â": "a",
        "Ã": "a",
        "Ä": "a",
        "Å": "a",
        "Æ": "a",
        "Ç": "c",
        "È": "e",
        "É": "e",
        "Ê": "e",
        "Ë": "e",
        "Ì": "i",
        "Í": "i",
        "Î": "i",
        "Ï": "i",
        "Ñ": "n",
        "Ò": "o",
        "Ó": "o",
        "Ô": "o",
        "Õ": "o",
        "Ö": "o",
        "×": "x",
        "Ø": "o",
        "Ù": "u",
        "Ú": "u",
        "Û": "u",
        "Ü": "u",
        "Ý": "y",
        "à": "a",
        "á": "a",
        "â": "a",
        "ã": "a",
        "ä": "a",
        "å": "a",
        "æ": "a",
        "ç": "c",
        "è": "e",
        "é": "e",
        "ê": "e",
        "ë": "e",
        "ì": "i",
        "í": "i",
        "î": "i",
        "ï": "i",
        "ñ": "n",
        "ò": "o",
        "ó": "o",
        "ô": "o",
        "õ": "o",
        "ö": "o",
        "ø": "o",
        "ù": "u",
        "ú": "u",
        "û": "u",
        "ü": "u",
        "ý": "y",
        "ÿ": "y",
        "Ā": "a",
        "ā": "a",
        "Ă": "a",
        "ă": "a",
        "Ą": "a",
        "ą": "a",
        "Ć": "c",
        "ć": "c",
        "Ĉ": "c",
        "ĉ": "c",
        "Ċ": "c",
        "ċ": "c",
        "Č": "c",
        "č": "c",
        "Ď": "d",
        "ď": "d",
        "Ē": "e",
        "ē": "e",
        "Ĕ": "e",
        "ĕ": "e",
        "Ė": "e",
        "ė": "e",
        "Ę": "e",
        "ę": "e",
        "Ě": "e",
        "ě": "e",
        "Ĝ": "g",
        "ĝ": "g",
        "Ğ": "g",
        "ğ": "g",
        "Ġ": "g",
        "ġ": "g",
        "Ģ": "g",
        "ģ": "g",
        "Ĥ": "h",
        "ĥ": "h",
        "Ħ": "h",
        "ħ": "h",
        "Ĩ": "i",
        "ĩ": "i",
        "Ī": "i",
        "ī": "i",
        "Ĭ": "i",
        "ĭ": "i",
        "Į": "i",
        "į": "i",
        "İ": "i",
        "ı": "i",
        "Ĳ": "i",
        "ĳ": "i",
        "Ĵ": "j",
        "ĵ": "j",
        "Ķ": "k",
        "ķ": "k",
        "Ĺ": "i",
        "ĺ": "i",
        "Ļ": "i",
        "ļ": "i",
        "Ľ": "i",
        "ľ": "i",
        "Ŀ": "i",
        "ŀ": "i",
        "Ł": "i",
        "ł": "i",
        "Ń": "n",
        "ń": "n",
        "Ņ": "n",
        "ņ": "n",
        "Ň": "n",
        "ň": "n",
        "Ō": "o",
        "ō": "o",
        "Ŏ": "o",
        "ŏ": "o",
        "Ő": "o",
        "ő": "o",
        "Ŕ": "r",
        "ŕ": "r",
        "Ŗ": "r",
        "ŗ": "r",
        "Ř": "r",
        "ř": "r",
        "Ś": "s",
        "ś": "s",
        "Ŝ": "s",
        "ŝ": "s",
        "Ş": "s",
        "ş": "s",
        "Š": "s",
        "š": "s",
        "Ţ": "t",
        "ţ": "t",
        "Ť": "t",
        "ť": "t",
        "Ŧ": "t",
        "ŧ": "t",
        "Ũ": "u",
        "ũ": "u",
        "Ū": "u",
        "ū": "u",
        "Ŭ": "u",
        "ŭ": "u",
        "Ů": "u",
        "ů": "u",
        "Ű": "u",
        "ű": "u",
        "Ų": "u",
        "ų": "u",
        "Ŵ": "w",
        "ŵ": "w",
        "Ŷ": "y",
        "ŷ": "y",
        "Ÿ": "y",
        "Ź": "z",
        "ź": "z",
        "Ż": "z",
        "ż": "z",
        "Ž": "z",
        "ž": "z",
        "ſ": "f",
        "ƀ": "b",
        "Ɓ": "b",
        "Ƃ": "b",
        "ƃ": "b",
        "Ƅ": "b",
        "Ƈ": "c",
        "ƈ": "c",
        "ƍ": "g",
        "Ƒ": "f",
        "ƒ": "f",
        "Ɠ": "g",
        "Ɩ": "i",
        "Ɨ": "i",
        "Ƙ": "k",
        "ƙ": "k",
        "ƚ": "i",
        "Ɲ": "n",
        "ƞ": "n",
        "Ơ": "o",
        "ơ": "o",
        "Ƥ": "p",
        "ƥ": "p",
        "Ʀ": "r",
        "Ƨ": "z",
        "ƫ": "t",
        "Ƭ": "t",
        "Ʈ": "t",
        "Ư": "u",
        "ư": "u",
        "Ʋ": "v",
        "Ƴ": "y",
        "ƴ": "y",
        "Ƶ": "z",
        "ƶ": "z",
        "Ʒ": "3",
        "Ƽ": "s",
        "ƽ": "s",
        "ƿ": "p",
        "ǀ": "i",
        "Ǎ": "a",
        "ǎ": "a",
        "Ǐ": "i",
        "ǐ": "i",
        "Ǒ": "o",
        "ǒ": "o",
        "Ǔ": "u",
        "ǔ": "u",
        "Ǖ": "u",
        "ǖ": "u",
        "Ǘ": "u",
        "ǘ": "u",
        "Ǚ": "u",
        "ǚ": "u",
        "Ǜ": "u",
        "ǜ": "u",
        "Ǟ": "a",
        "ǟ": "a",
        "Ǡ": "a",
        "ǡ": "a",
        "Ǣ": "a",
        "ǣ": "a",
        "Ǥ": "g",
        "ǥ": "g",
        "Ǧ": "g",
        "ǧ": "g",
        "Ǩ": "k",
        "ǩ": "k",
        "Ǫ": "o",
        "ǫ": "o",
        "Ǭ": "o",
        "ǭ": "o",
        "ǰ": "j",
        "Ǵ": "g",
        "ǵ": "g",
        "Ǹ": "n",
        "ǹ": "n",
        "Ǻ": "a",
        "ǻ": "a",
        "Ǽ": "a",
        "ǽ": "a",
        "Ǿ": "o",
        "ǿ": "o",
        "Ȁ": "a",
        "ȁ": "a",
        "Ȃ": "a",
        "ȃ": "a",
        "Ȅ": "e",
        "ȅ": "e",
        "Ȇ": "e",
        "ȇ": "e",
        "Ȉ": "i",
        "ȉ": "i",
        "Ȋ": "i",
        "ȋ": "i",
        "Ȍ": "o",
        "ȍ": "o",
        "Ȏ": "o",
        "ȏ": "o",
        "Ȑ": "r",
        "ȑ": "r",
        "Ȓ": "r",
        "ȓ": "r",
        "Ȕ": "u",
        "ȕ": "u",
        "Ȗ": "u",
        "ȗ": "u",
        "Ș": "s",
        "ș": "s",
        "Ț": "t",
        "ț": "t",
        "Ȝ": "3",
        "Ȟ": "h",
        "ȟ": "h",
        "Ƞ": "n",
        "Ȣ": "b",
        "ȣ": "b",
        "Ȥ": "z",
        "ȥ": "z",
        "Ȧ": "a",
        "ȧ": "a",
        "Ȩ": "e",
        "ȩ": "e",
        "Ȫ": "o",
        "ȫ": "o",
        "Ȭ": "o",
        "ȭ": "o",
        "Ȯ": "o",
        "ȯ": "o",
        "Ȱ": "o",
        "ȱ": "o",
        "Ȳ": "y",
        "ȳ": "y",
        "ȴ": "i",
        "ȵ": "n",
        "ȶ": "t",
        "ȷ": "j",
        "ȸ": "b",
        "Ⱥ": "a",
        "Ȼ": "c",
        "ȼ": "c",
        "Ƚ": "i",
        "ȿ": "s",
        "ɀ": "z",
        "Ƀ": "b",
        "Ʉ": "u",
        "Ɇ": "e",
        "ɇ": "e",
        "Ɉ": "j",
        "ɉ": "j",
        "Ɋ": "q",
        "ɋ": "q",
        "Ɍ": "r",
        "ɍ": "r",
        "Ɏ": "y",
        "ɏ": "y",
        "ɐ": "a",
        "ɑ": "a",
        "ɒ": "a",
        "ɓ": "b",
        "ɕ": "c",
        "ɟ": "j",
        "ɠ": "g",
        "ɡ": "g",
        "ɢ": "g",
        "ɣ": "y",
        "ɦ": "h",
        "ɨ": "i",
        "ɩ": "i",
        "ɪ": "i",
        "ɫ": "i",
        "ɬ": "i",
        "ɭ": "i",
        "ɯ": "w",
        "ɱ": "m",
        "ɲ": "n",
        "ɳ": "n",
        "ɴ": "n",
        "ɼ": "r",
        "ɽ": "r",
        "ɾ": "r",
        "ʀ": "r",
        "ʂ": "s",
        "ʄ": "j",
        "ʈ": "t",
        "ʉ": "u",
        "ʋ": "u",
        "ʏ": "y",
        "ʐ": "z",
        "ʑ": "z",
        "ʙ": "b",
        "ʜ": "h",
        "ʝ": "j",
        "ʟ": "i",
        "ʠ": "q",
        "ʰ": "h",
        "˛": "i",
        "ͺ": "i",
        "Ϳ": "j",
        "Α": "a",
        "Β": "b",
        "Ε": "e",
        "Ζ": "z",
        "Η": "h",
        "Ι": "i",
        "Κ": "k",
        "Μ": "m",
        "Ν": "n",
        "Ο": "o",
        "Ρ": "p",
        "Τ": "t",
        "Υ": "y",
        "Χ": "x",
        "α": "a",
        "γ": "y",
        "ι": "i",
        "ν": "v",
        "ο": "o",
        "ρ": "p",
        "σ": "o",
        "τ": "t",
        "υ": "u",
        "χ": "x",
        "ϒ": "y",
        "Ϝ": "f",
        "ϝ": "f",
        "Ϩ": "z",
        "ϱ": "p",
        "ϲ": "c",
        "ϳ": "j",
        "Ϲ": "c",
        "Ϻ": "m",
        "Ѕ": "s",
        "І": "i",
        "Ј": "j",
        "А": "a",
        "В": "b",
        "Е": "e",
        "З": "3",
        "К": "k",
        "М": "m",
        "Н": "h",
        "О": "o",
        "Р": "p",
        "С": "c",
        "Т": "t",
        "У": "y",
        "Х": "x",
        "Ь": "b",
        "а": "a",
        "б": "6",
        "в": "b",
        "г": "r",
        "е": "e",
        "н": "h",
        "о": "o",
        "п": "n",
        "р": "p",
        "с": "c",
        "т": "t",
        "у": "y",
        "х": "x",
        "ѕ": "s",
        "і": "i",
        "ј": "j",
        "ѡ": "w",
        "Ѵ": "v",
        "ѵ": "v",
        "Ү": "y",
        "ү": "y",
        "һ": "h",
        "ҽ": "e",
        "Ӏ": "i",
        "ӏ": "i",
        "Ӡ": "3",
        "ԁ": "d",
        "Ԍ": "g",
        "ԍ": "g",
        "ԛ": "q",
        "Ԝ": "w",
        "ԝ": "w",
        "Ս": "u",
        "Տ": "s",
        "Օ": "o",
        "ա": "w",
        "գ": "q",
        "զ": "q",
        "հ": "h",
        "ո": "n",
        "ռ": "n",
        "ս": "u",
        "ց": "g",
        "ք": "f",
        "օ": "o",
        "׀": "i",
        "ו": "i",
        "ט": "v",
        "ן": "i",
        "ס": "o",
        "ا": "i",
        "ه": "o",
        "١": "i",
        "٥": "o",
        "٧": "v",
        "ھ": "o",
        "ہ": "o",
        "ە": "o",
        "۱": "i",
        "۵": "o",
        "۷": "v",
        "߀": "o",
        "ߊ": "i",
        "०": "o",
        "০": "o",
        "৪": "b",
        "৭": "9",
        "੦": "o",
        "੧": "9",
        "੪": "b",
        "૦": "o",
        "ଃ": "b",
        "ଠ": "o",
        "୦": "o",
        "୨": "9",
        "௦": "o",
        "ం": "o",
        "౦": "o",
        "ಂ": "o",
        "೦": "o",
        "ം": "o",
        "ഠ": "o",
        "൦": "o",
        "൭": "9",
        "ං": "o",
        "๐": "o",
        "໐": "o",
        "ဝ": "o",
        "၀": "o",
        "Ⴍ": "q",
        "Ⴓ": "q",
        "ყ": "y",
        "ჿ": "o",
        "ሀ": "u",
        "ዐ": "o",
        "Ꭰ": "d",
        "Ꭱ": "r",
        "Ꭲ": "t",
        "Ꭵ": "i",
        "Ꭹ": "y",
        "Ꭺ": "a",
        "Ꭻ": "j",
        "Ꭼ": "e",
        "Ꮃ": "w",
        "Ꮇ": "m",
        "Ꮋ": "h",
        "Ꮍ": "y",
        "Ꮐ": "g",
        "Ꮒ": "h",
        "Ꮓ": "z",
        "Ꮞ": "4",
        "Ꮟ": "b",
        "Ꮢ": "r",
        "Ꮤ": "w",
        "Ꮥ": "s",
        "Ꮩ": "v",
        "Ꮪ": "s",
        "Ꮮ": "i",
        "Ꮯ": "c",
        "Ꮲ": "p",
        "Ꮶ": "k",
        "Ꮷ": "d",
        "Ꮾ": "6",
        "Ᏻ": "g",
        "Ᏼ": "b",
        "ᏻ": "g",
        "ᏼ": "b",
        "ᐯ": "v",
        "ᑌ": "u",
        "ᑭ": "p",
        "ᑯ": "d",
        "ᒍ": "j",
        "ᒪ": "i",
        "ᒿ": "z",
        "ᕁ": "x",
        "ᕼ": "h",
        "ᕽ": "x",
        "ᖇ": "r",
        "ᖯ": "b",
        "ᖴ": "f",
        "ᗅ": "a",
        "ᗞ": "d",
        "ᗪ": "d",
        "ᗰ": "m",
        "ᗷ": "b",
        "᙭": "x",
        "᙮": "x",
        "ᚱ": "r",
        "ᚷ": "x",
        "ᛁ": "i",
        "ᛒ": "b",
        "ᛕ": "k",
        "ᛖ": "m",
        "ᴀ": "a",
        "ᴄ": "c",
        "ᴅ": "d",
        "ᴇ": "e",
        "ᴊ": "j",
        "ᴋ": "k",
        "ᴍ": "m",
        "ᴏ": "o",
        "ᴑ": "o",
        "ᴘ": "p",
        "ᴛ": "t",
        "ᴜ": "u",
        "ᴠ": "v",
        "ᴡ": "w",
        "ᴢ": "z",
        "ᴦ": "r",
        "ᴨ": "n",
        "ᴩ": "p",
        "ᵬ": "b",
        "ᵮ": "f",
        "ᵯ": "m",
        "ᵰ": "n",
        "ᵱ": "p",
        "ᵲ": "r",
        "ᵳ": "r",
        "ᵵ": "t",
        "ᵶ": "z",
        "ᵻ": "i",
        "ᵽ": "p",
        "ᵾ": "u",
        "ᶀ": "b",
        "ᶂ": "f",
        "ᶃ": "g",
        "ᶄ": "k",
        "ᶅ": "i",
        "ᶆ": "m",
        "ᶇ": "n",
        "ᶈ": "p",
        "ᶉ": "r",
        "ᶊ": "s",
        "ᶌ": "v",
        "ᶍ": "x",
        "ᶎ": "z",
        "ᶏ": "a",
        "ᶒ": "e",
        "ᶖ": "i",
        "ᶙ": "u",
        "Ḁ": "a",
        "ḁ": "a",
        "Ḃ": "b",
        "ḃ": "b",
        "Ḅ": "b",
        "ḅ": "b",
        "Ḇ": "b",
        "ḇ": "b",
        "Ḉ": "c",
        "ḉ": "c",
        "Ḕ": "e",
        "ḕ": "e",
        "Ḗ": "e",
        "ḗ": "e",
        "Ḙ": "e",
        "ḙ": "e",
        "Ḛ": "e",
        "ḛ": "e",
        "Ḝ": "e",
        "ḝ": "e",
        "Ḟ": "f",
        "ḟ": "f",
        "Ḡ": "g",
        "ḡ": "g",
        "Ḣ": "h",
        "ḣ": "h",
        "Ḥ": "h",
        "ḥ": "h",
        "Ḧ": "h",
        "ḧ": "h",
        "Ḩ": "h",
        "ḩ": "h",
        "Ḫ": "h",
        "ḫ": "h",
        "Ḭ": "i",
        "ḭ": "i",
        "Ḯ": "i",
        "ḯ": "i",
        "Ḱ": "k",
        "ḱ": "k",
        "Ḳ": "k",
        "ḳ": "k",
        "Ḵ": "k",
        "ḵ": "k",
        "Ḷ": "i",
        "ḷ": "i",
        "Ḹ": "i",
        "ḹ": "i",
        "Ḻ": "i",
        "ḻ": "i",
        "Ḽ": "i",
        "ḽ": "i",
        "Ḿ": "m",
        "ḿ": "m",
        "Ṁ": "m",
        "ṁ": "m",
        "Ṃ": "m",
        "ṃ": "m",
        "Ṅ": "n",
        "ṅ": "n",
        "Ṇ": "n",
        "ṇ": "n",
        "Ṉ": "n",
        "ṉ": "n",
        "Ṋ": "n",
        "ṋ": "n",
        "Ṍ": "o",
        "ṍ": "o",
        "Ṏ": "o",
        "ṏ": "o",
        "Ṑ": "o",
        "ṑ": "o",
        "Ṓ": "o",
        "ṓ": "o",
        "Ṕ": "p",
        "ṕ": "p",
        "Ṗ": "p",
        "ṗ": "p",
        "Ṙ": "r",
        "ṙ": "r",
        "Ṛ": "r",
        "ṛ": "r",
        "Ṝ": "r",
        "ṝ": "r",
        "Ṟ": "r",
        "ṟ": "r",
        "Ṡ": "s",
        "ṡ": "s",
        "Ṣ": "s",
        "ṣ": "s",
        "Ṥ": "s",
        "ṥ": "s",
        "Ṧ": "s",
        "ṧ": "s",
        "Ṩ": "s",
        "ṩ": "s",
        "Ṫ": "t",
        "ṫ": "t",
        "Ṭ": "t",
        "ṭ": "t",
        "Ṯ": "t",
        "ṯ": "t",
        "Ṱ": "t",
        "ṱ": "t",
        "Ṳ": "u",
        "ṳ": "u",
        "Ṵ": "u",
        "ṵ": "u",
        "Ṷ": "u",
        "ṷ": "u",
        "Ṹ": "u",
        "ṹ": "u",
        "Ṻ": "u",
        "ṻ": "u",
        "Ṽ": "v",
        "ṽ": "v",
        "Ṿ": "v",
        "ṿ": "v",
        "Ẁ": "w",
        "ẁ": "w",
        "Ẃ": "w",
        "ẃ": "w",
        "Ẅ": "w",
        "ẅ": "w",
        "Ẇ": "w",
        "ẇ": "w",
        "Ẉ": "w",
        "ẉ": "w",
        "Ẋ": "x",
        "ẋ": "x",
        "Ẍ": "x",
        "ẍ": "x",
        "Ẏ": "y",
        "ẏ": "y",
        "Ẑ": "z",
        "ẑ": "z",
        "Ẓ": "z",
        "ẓ": "z",
        "Ẕ": "z",
        "ẕ": "z",
        "ẗ": "t",
        "ẘ": "w",
        "ẙ": "y",
        "ẝ": "f",
        "Ạ": "a",
        "ạ": "a",
        "Ả": "a",
        "ả": "a",
        "Ấ": "a",
        "ấ": "a",
        "Ầ": "a",
        "ầ": "a",
        "Ẩ": "a",
        "ẩ": "a",
        "Ẫ": "a",
        "ẫ": "a",
        "Ậ": "a",
        "ậ": "a",
        "Ắ": "a",
        "ắ": "a",
        "Ằ": "a",
        "ằ": "a",
        "Ẳ": "a",
        "ẳ": "a",
        "Ẵ": "a",
        "ẵ": "a",
        "Ặ": "a",
        "ặ": "a",
        "Ẹ": "e",
        "ẹ": "e",
        "Ẻ": "e",
        "ẻ": "e",
        "Ẽ": "e",
        "ẽ": "e",
        "Ế": "e",
        "ế": "e",
        "Ề": "e",
        "ề": "e",
        "Ể": "e",
        "ể": "e",
        "Ễ": "e",
        "ễ": "e",
        "Ệ": "e",
        "ệ": "e",
        "Ỉ": "i",
        "ỉ": "i",
        "Ị": "i",
        "ị": "i",
        "Ọ": "o",
        "ọ": "o",
        "Ỏ": "o",
        "ỏ": "o",
        "Ố": "o",
        "ố": "o",
        "Ồ": "o",
        "ồ": "o",
        "Ổ": "o",
        "ổ": "o",
        "Ỗ": "o",
        "ỗ": "o",
        "Ộ": "o",
        "ộ": "o",
        "Ớ": "o",
        "ớ": "o",
        "Ờ": "o",
        "ờ": "o",
        "Ở": "o",
        "ở": "o",
        "Ỡ": "o",
        "ỡ": "o",
        "Ợ": "o",
        "ợ": "o",
        "Ụ": "u",
        "ụ": "u",
        "Ủ": "u",
        "ủ": "u",
        "Ứ": "u",
        "ứ": "u",
        "Ừ": "u",
        "ừ": "u",
        "Ử": "u",
        "ử": "u",
        "Ữ": "u",
        "ữ": "u",
        "Ự": "u",
        "ự": "u",
        "Ỳ": "y",
        "ỳ": "y",
        "Ỵ": "y",
        "ỵ": "y",
        "Ỷ": "y",
        "ỷ": "y",
        "Ỹ": "y",
        "ỹ": "y",
        "ỿ": "y",
        "ι": "i",
        "ℂ": "c",
        "ℊ": "g",
        "ℋ": "h",
        "ℌ": "h",
        "ℍ": "h",
        "ℎ": "h",
        "ℐ": "i",
        "ℑ": "i",
        "ℒ": "i",
        "ℓ": "i",
        "℔": "b",
        "ℕ": "n",
        "ℙ": "p",
        "ℚ": "q",
        "ℛ": "r",
        "ℜ": "r",
        "ℝ": "r",
        "ℤ": "z",
        "ℨ": "z",
        "K": "k",
        "ℬ": "b",
        "ℭ": "c",
        "℮": "e",
        "ℯ": "e",
        "ℰ": "e",
        "ℱ": "f",
        "ℳ": "m",
        "ℴ": "o",
        "ℹ": "i",
        "ℽ": "y",
        "ⅅ": "d",
        "ⅆ": "d",
        "ⅇ": "e",
        "ⅈ": "i",
        "ⅉ": "j",
        "Ⅰ": "i",
        "Ⅴ": "v",
        "Ⅹ": "x",
        "Ⅼ": "i",
        "Ⅽ": "c",
        "Ⅾ": "d",
        "Ⅿ": "m",
        "ⅰ": "i",
        "ⅴ": "v",
        "ⅹ": "x",
        "ⅼ": "i",
        "ⅽ": "c",
        "ⅾ": "d",
        "∣": "i",
        "∨": "v",
        "∪": "u",
        "⊤": "t",
        "⋁": "v",
        "⋃": "u",
        "⋿": "e",
        "⍳": "i",
        "⍴": "p",
        "⍺": "a",
        "⏽": "i",
        "╳": "x",
        "⟙": "t",
        "⤫": "x",
        "⤬": "x",
        "⨯": "x",
        "Ⱡ": "i",
        "ⱡ": "i",
        "Ɫ": "i",
        "Ᵽ": "p",
        "Ɽ": "r",
        "ⱥ": "a",
        "Ⱨ": "h",
        "ⱨ": "h",
        "Ⱪ": "k",
        "ⱪ": "k",
        "Ⱬ": "z",
        "ⱬ": "z",
        "Ɑ": "a",
        "Ɱ": "m",
        "Ɐ": "a",
        "ⱱ": "v",
        "Ⱳ": "w",
        "ⱳ": "w",
        "ⱴ": "v",
        "ⱸ": "e",
        "ⱺ": "o",
        "ⲅ": "r",
        "Ⲏ": "h",
        "Ⲓ": "i",
        "Ⲕ": "k",
        "Ⲙ": "m",
        "Ⲛ": "n",
        "Ⲟ": "o",
        "ⲟ": "o",
        "Ⲣ": "p",
        "ⲣ": "p",
        "Ⲥ": "c",
        "ⲥ": "c",
        "Ⲧ": "t",
        "Ⲩ": "y",
        "Ⲭ": "x",
        "Ⳋ": "9",
        "Ⳍ": "3",
        "Ⳑ": "i",
        "ⳑ": "i",
        "Ⳓ": "6",
        "ⴸ": "v",
        "ⴹ": "e",
        "ⵏ": "i",
        "ⵔ": "o",
        "ⵕ": "q",
        "ⵝ": "x",
        "〇": "o",
        "ꓐ": "b",
        "ꓑ": "p",
        "ꓒ": "d",
        "ꓓ": "d",
        "ꓔ": "t",
        "ꓖ": "g",
        "ꓗ": "k",
        "ꓙ": "j",
        "ꓚ": "c",
        "ꓜ": "z",
        "ꓝ": "f",
        "ꓟ": "m",
        "ꓠ": "n",
        "ꓡ": "i",
        "ꓢ": "s",
        "ꓣ": "r",
        "ꓦ": "v",
        "ꓧ": "h",
        "ꓪ": "w",
        "ꓫ": "x",
        "ꓬ": "y",
        "ꓮ": "a",
        "ꓰ": "e",
        "ꓲ": "i",
        "ꓳ": "o",
        "ꓴ": "u",
        "Ꙅ": "z",
        "ꙇ": "i",
        "ꛟ": "v",
        "ꛯ": "z",
        "ꜰ": "f",
        "ꜱ": "s",
        "Ꜳ": "a",
        "ꜳ": "a",
        "Ꜵ": "a",
        "ꜵ": "a",
        "Ꜷ": "a",
        "ꜷ": "a",
        "Ꜹ": "a",
        "ꜹ": "a",
        "Ꜻ": "a",
        "ꜻ": "a",
        "Ꝁ": "k",
        "ꝁ": "k",
        "Ꝛ": "z",
        "Ꝫ": "3",
        "Ꝯ": "9",
        "Ꞙ": "f",
        "ꞙ": "f",
        "ꞟ": "u",
        "Ɜ": "3",
        "Ʝ": "j",
        "Ꭓ": "x",
        "Ꞵ": "b",
        "ꬲ": "e",
        "ꬵ": "f",
        "ꬽ": "o",
        "ꭇ": "r",
        "ꭈ": "r",
        "ꭎ": "u",
        "ꭒ": "u",
        "ꭚ": "y",
        "ꭰ": "d",
        "ꭱ": "r",
        "ꭲ": "t",
        "ꭵ": "i",
        "ꭺ": "a",
        "ꭻ": "j",
        "ꭼ": "e",
        "ꮁ": "r",
        "ꮃ": "w",
        "ꮋ": "h",
        "ꮐ": "g",
        "ꮓ": "z",
        "ꮢ": "r",
        "ꮩ": "v",
        "ꮪ": "s",
        "ꮮ": "i",
        "ꮯ": "c",
        "ꮲ": "p",
        "ﬀ": "f",
        "ﮦ": "o",
        "ﮧ": "o",
        "ﮨ": "o",
        "ﮩ": "o",
        "ﮪ": "o",
        "ﮫ": "o",
        "ﮬ": "o",
        "ﮭ": "o",
        "ﺍ": "i",
        "ﺎ": "i",
        "ﻩ": "o",
        "ﻪ": "o",
        "ﻫ": "o",
        "ﻬ": "o",
        "０": "o",
        "１": "i",
        "２": "z",
        "３": "3",
        "４": "4",
        "５": "s",
        "６": "6",
        "７": "z",
        "８": "b",
        "９": "9",
        "Ａ": "a",
        "Ｂ": "b",
        "Ｃ": "c",
        "Ｄ": "d",
        "Ｅ": "e",
        "Ｆ": "f",
        "Ｇ": "g",
        "Ｈ": "h",
        "Ｉ": "i",
        "Ｊ": "j",
        "Ｋ": "k",
        "Ｌ": "i",
        "Ｍ": "m",
        "Ｎ": "n",
        "Ｏ": "o",
        "Ｐ": "p",
        "Ｑ": "q",
        "Ｒ": "r",
        "Ｓ": "s",
        "Ｔ": "t",
        "Ｕ": "u",
        "Ｖ": "v",
        "Ｗ": "w",
        "Ｘ": "x",
        "Ｙ": "y",
        "Ｚ": "z",
        "ａ": "a",
        "ｂ": "b",
        "ｃ": "c",
        "ｄ": "d",
        "ｅ": "e",
        "ｆ": "f",
        "ｇ": "g",
        "ｈ": "h",
        "ｉ": "i",
        "ｊ": "j",
        "ｋ": "k",
        "ｌ": "i",
        "ｍ": "m",
        "ｎ": "n",
        "ｏ": "o",
        "ｐ": "p",
        "ｑ": "q",
        "ｒ": "r",
        "ｓ": "s",
        "ｔ": "t",
        "ｕ": "u",
        "ｖ": "v",
        "ｗ": "w",
        "ｘ": "x",
        "ｙ": "y",
        "ｚ": "z",
        "￨": "i",
        "��": "j",
        "l": "i",
        "|": "i",
    }
    input = input.lower()

    input = input.replace("rn", "m")
    input = input.replace("vv", "w")

    chars = list(input)

    for i in range(len(chars)):
        lowerCaseNorm = NormalizationMap.get(chars[i].lower())
        if lowerCaseNorm:
            chars[i] = lowerCaseNorm
        else:
            upperCaseNorm = NormalizationMap.get(chars[i].upper())
            if upperCaseNorm:
                chars[i] = upperCaseNorm

    return "".join(chars)
